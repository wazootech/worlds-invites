<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invites Console</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    >
    <style>
      body {
        font-family: "Inter", sans-serif;
      }

      .glass {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
    </style>
  </head>
  <body class="bg-slate-50 min-h-screen text-slate-900">
    <div class="max-w-5xl mx-auto p-4 md:p-8">
      <header
        class="mb-10 flex flex-col md:flex-row md:items-center justify-between gap-4"
      >
        <div>
          <h1
            class="text-3xl font-bold tracking-tight text-slate-900 flex items-center gap-2"
          >
            <span class="bg-indigo-600 text-white p-1 rounded-lg">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <line x1="19" x2="19" y1="8" y2="14" />
                <line x1="22" x2="16" y1="11" y2="11" />
              </svg>
            </span>
            Invites Console
          </h1>
          <p class="text-slate-500 mt-1">Manage your project invite codes</p>
        </div>

        <div
          id="connection-status"
          class="flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-slate-100 text-slate-600"
        >
          <span class="w-2 h-2 rounded-full bg-slate-400 animate-pulse"></span>
          Enter Configuration
        </div>
      </header>

      <main class="grid gap-6">
        <!-- Top Row: Config and Create -->
        <div class="grid md:grid-cols-2 gap-6">
          <!-- Connect Card -->
          <section
            class="glass p-6 rounded-2xl shadow-sm overflow-hidden border border-white/20"
          >
            <div class="flex items-center justify-between mb-6">
              <h2
                class="text-lg font-semibold flex items-center gap-2 text-slate-800"
              >
                <div class="p-2 bg-indigo-50 text-indigo-600 rounded-lg">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <rect width="18" height="11" x="3" y="11" rx="2" ry="2" />
                    <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                  </svg>
                </div>
                Connect API
              </h2>
            </div>

            <div class="space-y-6">
              <div>
                <label
                  for="apiKey"
                  class="block text-xs font-bold text-slate-400 uppercase tracking-widest mb-2 px-1"
                >API Authentication</label>
                <div class="relative group">
                  <div
                    class="absolute inset-y-0 left-3.5 flex items-center pointer-events-none text-slate-400 group-focus-within:text-indigo-500 transition-colors"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <rect width="18" height="11" x="3" y="11" rx="2" ry="2" />
                      <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                    </svg>
                  </div>
                  <input
                    type="password"
                    id="apiKey"
                    placeholder="Enter your API secret..."
                    class="w-full pl-10 pr-4 py-2.5 bg-white/50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder:text-slate-300"
                  >
                </div>
              </div>

              <div class="pt-2">
                <button
                  id="save-config"
                  class="w-full px-6 py-3.5 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 shadow-lg shadow-indigo-100 hover:shadow-indigo-200 active:scale-[0.98] transition-all flex items-center justify-center gap-2 group"
                >
                  Connect API
                  <svg
                    class="group-hover:translate-x-0.5 transition-transform"
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="m5 12 7 7 7-7" />
                    <path d="M12 19V5" />
                  </svg>
                </button>
              </div>
            </div>
          </section>

          <!-- Create Invite Card -->
          <section
            class="glass p-6 rounded-2xl shadow-sm border border-white/20"
          >
            <h2
              class="text-lg font-semibold mb-6 flex items-center gap-2 text-slate-800"
            >
              <div class="p-2 bg-indigo-50 text-indigo-600 rounded-lg">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M5 12h14" />
                  <path d="M12 5v14" />
                </svg>
              </div>
              Create Invite
            </h2>
            <div class="space-y-6">
              <div>
                <label
                  for="customCode"
                  class="block text-xs font-bold text-slate-400 uppercase tracking-widest mb-2 px-1"
                >Custom Reference</label>
                <div class="relative group">
                  <div
                    class="absolute inset-y-0 left-3.5 flex items-center pointer-events-none text-slate-400 group-focus-within:text-indigo-500 transition-colors"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path
                        d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"
                      />
                      <rect width="8" height="4" x="8" y="2" rx="1" ry="1" />
                    </svg>
                  </div>
                  <input
                    type="text"
                    id="customCode"
                    placeholder="Leave blank for random..."
                    class="w-full pl-10 pr-4 py-2.5 bg-white/50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all placeholder:text-slate-300"
                  >
                </div>
              </div>

              <div class="pt-2">
                <button
                  id="create-invite"
                  class="w-full px-6 py-3.5 bg-slate-900 text-white rounded-xl font-semibold hover:bg-slate-800 active:scale-[0.98] transition-all flex items-center justify-center gap-2 group"
                >
                  Generate Invite
                  <svg
                    class="group-hover:translate-x-1 transition-transform"
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <line x1="5" y1="12" x2="19" y2="12" />
                    <polyline points="12 5 19 12 12 19" />
                  </svg>
                </button>
              </div>

              <p
                class="text-[11px] text-center text-slate-400 font-medium px-4"
              >
                Generated codes will follow the configuration defaults set
                above.
              </p>
            </div>
          </section>
        </div>

        <!-- Generation Configuration Card (Bottom Row) -->
        <section
          class="glass p-6 rounded-2xl shadow-sm border border-white/20 mb-6"
        >
          <div class="flex items-center justify-between mb-6">
            <h2
              class="text-lg font-semibold flex items-center gap-2 text-slate-800"
            >
              <div class="p-2 bg-indigo-50 text-indigo-600 rounded-lg">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"
                  />
                  <circle cx="12" cy="12" r="3" />
                </svg>
              </div>
              Generation Configuration
            </h2>
          </div>

          <div class="grid md:grid-cols-2 gap-8">
            <div class="space-y-6">
              <div>
                <label
                  class="block text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 px-1"
                >Generation Defaults</label>
                <div class="grid grid-cols-2 gap-4">
                  <div class="group">
                    <label
                      for="alphabet"
                      class="block text-xs font-medium text-slate-500 mb-1.5 px-1"
                    >Custom Alphabet</label>
                    <input
                      type="text"
                      id="alphabet"
                      placeholder="e.g. ABCDEF123"
                      class="w-full px-4 py-2.5 bg-white/50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all placeholder:text-slate-300"
                    >
                  </div>
                  <div class="group">
                    <label
                      for="size"
                      class="block text-xs font-medium text-slate-500 mb-1.5 px-1"
                    >Length</label>
                    <input
                      type="number"
                      id="size"
                      placeholder="e.g. 10"
                      class="w-full px-4 py-2.5 bg-white/50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all placeholder:text-slate-300"
                    >
                  </div>
                </div>
              </div>

              <div class="pt-4">
                <p class="text-[11px] text-slate-400 font-medium px-4 mb-4">
                  These settings define the format of randomly generated invite
                  codes. You can also pick a preset below to quickly fill these
                  fields.
                </p>
                <div id="status-storage" class="hidden"></div>
              </div>
            </div>

            <div>
              <label
                class="block text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 px-1"
              >Presets</label>
              <div class="grid grid-cols-1 gap-3">
                <button
                  type="button"
                  class="preset-btn px-4 py-3 bg-white/50 border border-slate-200 rounded-xl text-sm text-slate-700 font-semibold hover:bg-slate-50 hover:border-indigo-200 transition-all active:scale-[0.98] text-left flex items-center justify-between group"
                  data-alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"
                  data-size="4"
                >
                  <div class="flex flex-col">
                    <span>Alphanumeric PIN</span>
                    <span class="text-[11px] text-slate-400 font-normal"
                    >A-Z, 0-9 (Size 4)</span>
                  </div>
                  <svg
                    class="opacity-0 group-hover:opacity-100 transition-opacity text-indigo-500"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M5 12h14" />
                    <path d="m12 5 7 7-7 7" />
                  </svg>
                </button>
                <button
                  type="button"
                  class="preset-btn px-4 py-3 bg-white/50 border border-slate-200 rounded-xl text-sm text-slate-700 font-semibold hover:bg-slate-50 hover:border-indigo-200 transition-all active:scale-[0.98] text-left flex items-center justify-between group"
                  data-alphabet="0123456789"
                  data-size="4"
                >
                  <div class="flex flex-col">
                    <span>Numeric PIN</span>
                    <span class="text-[11px] text-slate-400 font-normal"
                    >0-9 (Size 4)</span>
                  </div>
                  <svg
                    class="opacity-0 group-hover:opacity-100 transition-opacity text-indigo-500"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M5 12h14" />
                    <path d="m12 5 7 7-7 7" />
                  </svg>
                </button>
                <button
                  type="button"
                  class="preset-btn px-4 py-3 bg-white/50 border border-slate-200 rounded-xl text-sm text-slate-700 font-semibold hover:bg-slate-50 hover:border-indigo-200 transition-all active:scale-[0.98] text-left flex items-center justify-between group"
                  data-alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"
                  data-size="21"
                >
                  <div class="flex flex-col">
                    <span>Standard ID</span>
                    <span class="text-[11px] text-slate-400 font-normal"
                    >Base62 (Size 21)</span>
                  </div>
                  <svg
                    class="opacity-0 group-hover:opacity-100 transition-opacity text-indigo-500"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M5 12h14" />
                    <path d="m12 5 7 7-7 7" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </section>

        <!-- Console Content (Full Width Table) -->
        <div
          id="console-content"
          class="opacity-50 pointer-events-none transition-opacity duration-300"
        >
          <!-- Active Invites Section -->
          <section
            class="glass rounded-2xl shadow-sm border border-white/20 overflow-hidden"
          >
            <!-- Table Header/Actions -->
            <div
              class="p-6 border-b border-slate-100/50 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white/30"
            >
              <h2
                class="text-lg font-semibold flex items-center gap-2 text-slate-800"
              >
                <div class="p-2 bg-indigo-50 text-indigo-600 rounded-lg">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <rect width="18" height="18" x="3" y="4" rx="2" ry="2" />
                    <line x1="3" y1="10" x2="21" y2="10" />
                    <path d="M9 16l2 2 4-4" />
                  </svg>
                </div>
                Active Invites
              </h2>

              <div class="flex items-center gap-3">
                <!-- Search Bar -->
                <div class="relative group min-w-[300px]">
                  <div
                    class="absolute inset-y-0 left-3.5 flex items-center pointer-events-none text-slate-400 group-focus-within:text-indigo-500 transition-colors"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <circle cx="11" cy="11" r="8" />
                      <path d="m21 21-4.3-4.3" />
                    </svg>
                  </div>
                  <input
                    type="text"
                    id="search-input"
                    placeholder="Filter by code..."
                    class="w-full pl-10 pr-10 py-2.5 bg-white/50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all placeholder:text-slate-300"
                  >
                  <button
                    id="clear-search"
                    class="hidden absolute inset-y-0 right-3 flex items-center text-slate-400 hover:text-slate-600 transition-colors"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M18 6 6 18" />
                      <path d="m6 6 12 12" />
                    </svg>
                  </button>
                </div>

                <!-- Bulk Actions -->
                <div
                  class="flex items-center gap-2 border-l border-slate-200 pl-3"
                >
                  <button
                    id="delete-selected"
                    class="hidden px-4 py-2 bg-red-50 text-red-600 rounded-lg text-sm font-semibold hover:bg-red-100 transition-all flex items-center gap-2"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="14"
                      height="14"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M3 6h18" />
                      <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" />
                      <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
                      <line x1="10" y1="11" x2="10" y2="17" />
                      <line x1="14" y1="11" x2="14" y2="17" />
                    </svg>
                    Delete Selected
                  </button>
                  <button
                    id="delete-all"
                    class="px-4 py-2 bg-slate-100 text-slate-600 rounded-lg text-sm font-semibold hover:bg-slate-200 transition-all"
                  >
                    Delete All
                  </button>
                  <button
                    id="refresh-list"
                    class="p-2.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all"
                    title="Refresh items"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="20"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path
                        d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"
                      />
                      <path d="M21 3v5h-5" />
                      <path
                        d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"
                      />
                      <path d="M8 16H3v5" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <div class="overflow-x-auto">
              <table class="w-full text-left border-collapse">
                <thead>
                  <tr class="border-b border-slate-100">
                    <th class="py-4 px-6 w-12 text-center">
                      <input
                        type="checkbox"
                        id="select-all"
                        class="rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer"
                      >
                    </th>
                    <th
                      class="py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-widest text-left"
                    >
                      Code
                    </th>
                    <th
                      class="py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-widest text-left"
                    >
                      Created
                    </th>
                    <th
                      class="py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-widest text-left"
                    >
                      Redeemed At
                    </th>
                    <th
                      class="py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-widest text-right"
                    >
                      Redeemed By
                    </th>
                  </tr>
                </thead>
                <tbody id="invites-table-body">
                  <!-- Table rows will be rendered here -->
                </tbody>
              </table>
            </div>
            <!-- Pagination -->
            <div
              id="pagination-controls"
              class="p-4 px-6 border-t border-slate-100/50 flex items-center justify-between bg-white/20"
            >
              <div
                class="text-[13px] font-medium text-slate-400 flex items-center gap-4"
              >
                <span
                  class="bg-white/50 border border-slate-200/50 px-3 py-1 rounded-full text-slate-600 shadow-sm"
                >
                  Showing <strong
                    id="items-count"
                    class="text-indigo-600 font-bold"
                  >0</strong> invites
                </span>
                <span class="flex items-center gap-1.5 opacity-60">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path
                      d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                    />
                    <polyline points="14 2 14 8 20 8" />
                    <path d="M16 13H8" />
                    <path d="M16 17H8" />
                    <path d="M10 9H8" />
                  </svg>
                  Page <span id="current-page">1</span>
                </span>
              </div>
              <div class="flex items-center gap-2">
                <button
                  id="prev-page"
                  disabled
                  class="flex items-center gap-1.5 px-4 py-2 text-sm font-semibold text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 disabled:opacity-30 disabled:pointer-events-none transition-all shadow-sm"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="m15 18-6-6 6-6" />
                  </svg>
                  Previous
                </button>
                <button
                  id="next-page"
                  disabled
                  class="flex items-center gap-1.5 px-4 py-2 text-sm font-semibold text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 disabled:opacity-30 disabled:pointer-events-none transition-all shadow-sm group"
                >
                  Next
                  <svg
                    class="group-hover:translate-x-0.5 transition-transform"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="m9 18 6-6-6-6" />
                  </svg>
                </button>
              </div>
            </div>

            <div
              id="empty-state"
              class="hidden flex-col items-center justify-center py-12 text-slate-400"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="48"
                height="48"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="mb-3 opacity-20"
              >
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                <line x1="16" y1="2" x2="16" y2="6" />
                <line x1="8" y1="2" x2="8" y2="6" />
                <line x1="3" y1="10" x2="21" y2="10" />
                <path d="m9 16 2 2 4-4" />
              </svg>
              <p>No invites created yet</p>
            </div>
          </section>
        </div>
      </main>

      <footer class="mt-12 text-center text-slate-400 text-sm">
        Developed with ðŸ’–
        <a
          href="https://github.com/FartLabs"
          target="_blank"
          class="hover:text-indigo-600 transition-colors"
        ><strong>@FartLabs</strong></a>
      </footer>
    </div>

    <!-- Toast Notifications -->
    <div
      id="toast-container"
      class="fixed bottom-6 right-6 z-50 flex flex-col gap-2"
    >
    </div>

    <script>
      // Simple SDK-like functions
      class InvitesClient {
        constructor(apiKey) {
          this.baseUrl = window.location.origin;
          this.apiKey = apiKey;
        }

        async fetch(path, options = {}) {
          const url = `${this.baseUrl}${path}`;
          const headers = { ...options.headers };
          if (this.apiKey) {
            headers["X-Api-Key"] = this.apiKey;
          }

          const response = await fetch(url, { ...options, headers });
          if (!response.ok) {
            const error = await response.json().catch(() => ({
              error: response.statusText,
            }));
            throw new Error(error.error || `HTTP ${response.status}`);
          }
          return response.status === 204 ? null : response.json();
        }

        list(params = {}) {
          const query = new URLSearchParams();
          if (params.cursor) query.set("cursor", params.cursor);
          query.set("limit", params.limit || 10);
          const path = `/v1/invites${
            query.toString() ? `?${query.toString()}` : ""
          }`;
          return this.fetch(path);
        }

        create(code, alphabet, size) {
          const query = new URLSearchParams();
          if (alphabet) query.set("alphabet", alphabet);
          if (size) query.set("size", size);
          const path = `/v1/invites${
            query.toString() ? `?${query.toString()}` : ""
          }`;

          return this.fetch(path, {
            method: "POST",
            body: JSON.stringify({ code: code || undefined }),
          });
        }

        get(code) {
          return this.fetch(`/v1/invites/${code}`);
        }

        delete(code) {
          return this.fetch(`/v1/invites/${code}`, {
            method: "DELETE",
          });
        }

        deleteMany(codes) {
          return this.fetch("/v1/invites", {
            method: "DELETE",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ codes }),
          });
        }

        deleteAll() {
          return this.fetch("/v1/invites?all=true", {
            method: "DELETE",
          });
        }
      }

      // UI State
      let client = null;
      let currentCursor = null;
      let cursorStack = []; // For "Previous" button
      let selectedCodes = new Set();
      let allInvites = [];

      const elements = {
        apiKey: document.getElementById("apiKey"),
        alphabet: document.getElementById("alphabet"),
        size: document.getElementById("size"),
        saveConfig: document.getElementById("save-config"),
        consoleContent: document.getElementById("console-content"),
        tableBody: document.getElementById("invites-table-body"),
        createInvite: document.getElementById("create-invite"),
        customCode: document.getElementById("customCode"),
        refreshList: document.getElementById("refresh-list"),
        connectionStatus: document.getElementById("connection-status"),
        emptyState: document.getElementById("empty-state"),
        toastContainer: document.getElementById("toast-container"),
        selectAll: document.getElementById("select-all"),
        deleteSelected: document.getElementById("delete-selected"),
        deleteAll: document.getElementById("delete-all"),
        prevPage: document.getElementById("prev-page"),
        nextPage: document.getElementById("next-page"),
        itemsCount: document.getElementById("items-count"),
        currentPage: document.getElementById("current-page"),
        paginationControls: document.getElementById(
          "pagination-controls",
        ),
        searchInput: document.getElementById("search-input"),
        clearSearch: document.getElementById("clear-search"),
      };

      // UI Helpers
      function showToast(message, type = "success") {
        const toast = document.createElement("div");
        toast.className =
          `p-4 rounded-xl shadow-lg flex items-center gap-3 animate-slide-up border transition-all duration-300 ${
            type === "success"
              ? "bg-white text-indigo-900 border-indigo-100"
              : "bg-red-50 text-red-900 border-red-100"
          }`;

        const icon = type === "success"
          ? '<svg class="text-indigo-500" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'
          : '<svg class="text-red-500" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>';

        toast.innerHTML =
          `${icon} <span class="font-medium">${message}</span>`;
        elements.toastContainer.appendChild(toast);

        setTimeout(() => {
          toast.classList.add("opacity-0", "translate-y-2");
          setTimeout(() => toast.remove(), 300);
        }, 3000);
      }

      async function refreshInvites(cursor = null, isPushing = false) {
        if (!client) return;

        elements.refreshList.classList.add("animate-spin");
        try {
          const { items, cursor: nextCursor } = await client.list({
            cursor,
          });
          allInvites = items;

          if (isPushing) {
            cursorStack.push(currentCursor);
          }
          currentCursor = cursor;

          renderInvites(items);

          elements.nextPage.disabled = !nextCursor;
          elements.nextPage.dataset.cursor = nextCursor || "";
          elements.prevPage.disabled = cursorStack.length === 0;
          elements.currentPage.textContent = cursorStack.length + 1;

          updateBulkDeleteButton();
        } catch (err) {
          showToast(err.message, "error");
        } finally {
          elements.refreshList.classList.remove("animate-spin");
        }
      }

      function updateBulkDeleteButton() {
        if (selectedCodes.size > 0) {
          elements.deleteSelected.classList.remove("hidden");
          elements.deleteSelected.querySelector("span") ||
            elements.deleteSelected.insertAdjacentHTML(
              "beforeend",
              `<span class="ml-1">(${selectedCodes.size})</span>`,
            );
          const countSpan = elements.deleteSelected.querySelector(
            "span:last-child",
          );
          if (countSpan) {
            countSpan.textContent = `(${selectedCodes.size})`;
          }
        } else {
          elements.deleteSelected.classList.add("hidden");
        }
      }

      function renderInvites(invites) {
        elements.tableBody.innerHTML = "";
        elements.itemsCount.textContent = invites.length;

        if (!invites || invites.length === 0) {
          elements.emptyState.classList.remove("hidden");
          elements.emptyState.classList.add("flex");
          // Hide table if empty
          elements.tableBody.closest("table").classList.add("hidden");
          return;
        }

        elements.emptyState.classList.add("hidden");
        elements.emptyState.classList.remove("flex");
        elements.tableBody.closest("table").classList.remove("hidden");

        const allChecked = invites.every((inv) =>
          selectedCodes.has(inv.code)
        );
        elements.selectAll.checked = invites.length > 0 && allChecked;

        invites.forEach((invite) => {
          const date = new Date(invite.createdAt).toLocaleString();
          const tr = document.createElement("tr");
          tr.className =
            "border-b border-slate-50 group hover:bg-indigo-50/30 transition-all duration-200";

          const isSelected = selectedCodes.has(invite.code);

          tr.innerHTML = `
            <td class="py-4 px-6 text-center">
              <input type="checkbox" class="row-checkbox rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer" data-code="${invite.code}" ${
            isSelected ? "checked" : ""
          }>
            </td>
            <td class="py-4 px-6">
               <span class="font-mono font-bold text-slate-700 bg-white border border-slate-100 px-2 py-1 rounded-lg shadow-sm text-sm group-hover:border-indigo-200 transition-colors">${invite.code}</span>
            </td>
            <td class="py-4 px-6 text-[13px] font-medium text-slate-500">
              <div class="flex items-center gap-2">
                <svg class="text-slate-300" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                ${date}
              </div>
            </td>
            <td class="py-4 px-6">
              ${
            invite.redeemedAt
              ? `<div class="flex items-center gap-2 text-[13px] text-slate-600">
                   <div class="w-1.5 h-1.5 rounded-full bg-slate-300"></div>
                   ${new Date(invite.redeemedAt).toLocaleString()}
                 </div>`
              : '<span class="px-2 py-1 bg-indigo-50 text-indigo-600 text-[11px] font-bold rounded-md uppercase tracking-wider">Available</span>'
          }
            </td>
            <td class="py-4 px-6 text-right">
              ${
            invite.redeemedBy
              ? `<div class="inline-flex items-center gap-2 px-3 py-1 bg-slate-100 rounded-full text-xs font-semibold text-slate-700 border border-slate-200/50">
                   <svg class="text-slate-400" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                   ${invite.redeemedBy}
                 </div>`
              : '<span class="text-slate-300 italic text-sm">-</span>'
          }
            </td>
          `;

          const checkbox = tr.querySelector(".row-checkbox");
          checkbox.onchange = (e) => {
            if (e.target.checked) {
              selectedCodes.add(invite.code);
            } else {
              selectedCodes.delete(invite.code);
              elements.selectAll.checked = false;
            }
            updateBulkDeleteButton();
          };

          elements.tableBody.appendChild(tr);
        });
      }

      // Event Handlers
      elements.saveConfig.onclick = async () => {
        const key = elements.apiKey.value.trim();
        const alphabet = elements.alphabet.value.trim();
        const size = elements.size.value.trim();

        elements.saveConfig.disabled = true;
        elements.saveConfig.innerHTML =
          '<svg class="animate-spin h-5 w-5 mr-3" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="transparent"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Connecting...';

        client = new InvitesClient(key);

        try {
          // Test connection
          await client.list({ limit: 1 });

          elements.consoleContent.classList.remove(
            "opacity-50",
            "pointer-events-none",
          );
          elements.connectionStatus.innerHTML =
            '<span class="w-2 h-2 rounded-full bg-indigo-500"></span> Connected';
          elements.connectionStatus.className =
            "flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-indigo-50 text-indigo-700";

          localStorage.setItem("invites_apiKey", key);
          localStorage.setItem("invites_alphabet", alphabet);
          localStorage.setItem("invites_size", size);

          showToast("Successfully connected to API");
          refreshInvites();
        } catch (err) {
          showToast("Failed to connect: " + err.message, "error");
          elements.consoleContent.classList.add(
            "opacity-50",
            "pointer-events-none",
          );
          elements.connectionStatus.innerHTML =
            '<span class="w-2 h-2 rounded-full bg-red-400"></span> Connection Failed';
          elements.connectionStatus.className =
            "flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-red-50 text-red-600";
        } finally {
          elements.saveConfig.disabled = false;
          elements.saveConfig.innerHTML = "Connect API";
        }
      };

      elements.createInvite.onclick = async () => {
        if (!client) return;

        const code = elements.customCode.value.trim();
        const alphabet = elements.alphabet.value.trim();
        const size = elements.size.value.trim();
        elements.createInvite.disabled = true;

        try {
          const invite = await client.create(
            code,
            alphabet || undefined,
            size || undefined,
          );
          showToast(`Created invite: ${invite.code}`);
          elements.customCode.value = "";
          refreshInvites(currentCursor, false);
        } catch (err) {
          showToast(err.message, "error");
        } finally {
          elements.createInvite.disabled = false;
        }
      };

      elements.refreshList.onclick = () =>
        refreshInvites(currentCursor, false);

      elements.selectAll.onchange = (e) => {
        const checkboxes = elements.tableBody.querySelectorAll(
          ".row-checkbox",
        );
        checkboxes.forEach((cb) => {
          cb.checked = e.target.checked;
          const code = cb.dataset.code;
          if (e.target.checked) {
            selectedCodes.add(code);
          } else {
            selectedCodes.delete(code);
          }
        });
        updateBulkDeleteButton();
      };

      elements.deleteSelected.onclick = async () => {
        const codes = Array.from(selectedCodes);
        if (codes.length === 0) return;
        if (!confirm(`Delete ${codes.length} selected invites?`)) {
          return;
        }

        try {
          await client.deleteMany(codes);
          showToast(`${codes.length} invites deleted`);
          selectedCodes.clear();
          refreshInvites(currentCursor, false);
        } catch (err) {
          showToast(err.message, "error");
        }
      };

      elements.deleteAll.onclick = async () => {
        if (
          !confirm(
            "Are you sure you want to delete ALL invites? This action cannot be undone.",
          )
        ) return;

        try {
          await client.deleteAll();
          showToast("All invites deleted");
          selectedCodes.clear();
          currentCursor = null;
          cursorStack = [];
          refreshInvites();
        } catch (err) {
          showToast(err.message, "error");
        }
      };

      elements.nextPage.onclick = () => {
        const nextCursor = elements.nextPage.dataset.cursor;
        if (nextCursor) {
          refreshInvites(nextCursor, true);
        }
      };

      elements.prevPage.onclick = () => {
        const prevCursor = cursorStack.pop();
        refreshInvites(prevCursor, false);
      };

      // Search Logic
      let searchTimeout = null;
      elements.searchInput.oninput = (e) => {
        const query = e.target.value.trim();

        if (query) {
          elements.clearSearch.classList.remove("hidden");
          elements.clearSearch.classList.add("flex");
        } else {
          elements.clearSearch.classList.add("hidden");
          elements.clearSearch.classList.remove("flex");
        }

        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(async () => {
          if (!query) {
            currentCursor = null;
            cursorStack = [];
            refreshInvites();
            return;
          }

          try {
            const invite = await client.get(query);
            renderInvites([invite]);
            // Hide pagination when showing search result
            elements.paginationControls.classList.add("hidden");
          } catch (err) {
            renderInvites([]);
            elements.paginationControls.classList.add("hidden");
          }
        }, 300);
      };

      elements.clearSearch.onclick = () => {
        elements.searchInput.value = "";
        elements.clearSearch.classList.add("hidden");
        elements.clearSearch.classList.remove("flex");
        currentCursor = null;
        cursorStack = [];
        elements.paginationControls.classList.remove("hidden");
        refreshInvites();
      };

      // Generation Config Handlers
      document.querySelectorAll(".preset-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          const { alphabet, size } = btn.dataset;
          elements.alphabet.value = alphabet;
          elements.size.value = size;
          localStorage.setItem("invites_alphabet", alphabet);
          localStorage.setItem("invites_size", size);
          showToast(
            `Applied ${
              btn.querySelector("span").textContent.trim()
            } preset`,
          );
        });
      });

      [elements.alphabet, elements.size].forEach((input) => {
        input.addEventListener("input", () => {
          localStorage.setItem(`invites_${input.id}`, input.value);
        });
      });

      // Init
      window.onload = () => {
        const savedKey = localStorage.getItem("invites_apiKey");
        const savedAlphabet = localStorage.getItem("invites_alphabet");
        const savedSize = localStorage.getItem("invites_size");

        if (savedKey) elements.apiKey.value = savedKey;
        if (savedAlphabet) elements.alphabet.value = savedAlphabet;
        if (savedSize) elements.size.value = savedSize;

        if (savedKey) {
          // Optionally auto-connect
          elements.saveConfig.click();
        }
      };

      // Add CSS animation for toasts
      const style = document.createElement("style");
      style.textContent = `
            @keyframes animate-slide-up {
                0% { transform: translateY(20px); opacity: 0; }
                100% { transform: translateY(0); opacity: 1; }
            }
            .animate-slide-up {
                animation: animate-slide-up 0.3s ease-out forwards;
            }
        `;
      document.head.appendChild(style);
    </script>
  </body>
</html>
